schema: kata.ai/schema/merapi/1.0

name: ${package.name}
version: ${package.version}

components:
    main: Main
    bot: Bot
    deployment: Deployment
    compile: scripts/Compile
    utils: scripts/Utils
    tester: scripts/Tester
    api: Api

commands:
    bot:
        type: group
        desc: Commands for bot management
        # middleware:
            # name of component function
            # - acl.login
        subcommands:
            init:
                desc: initialize new bot.yml file
                args: "<bot> <name> [version]"
                params:
                    config:
                        type: string
                        desc: param string
                handler: bot.init
            versions:
                desc: list all bot versions
                handler: bot.versions
            list:
                desc: list all user's bots
                handler: bot.list
            push:
                desc: push and update version bot
                params:
                    rev:
                        type: enum
                        enum:
                            - major
                            - minor
                            - patch
                handler: bot.update
            delete:
                desc: delete bot
                handler: bot.delete
                # middleware:
                #     - confirm
            test:
                desc: running test file
                args: "[file]"
                handler: bot.test
    deployment:
        type: group
        desc: Commands for deployment bot
        # middleware:
        #     - acl.login
        subcommands:
            deploy:
                desc: create or update deployment
                args: <bot> <name> [version]
                handler: deployment.deploy
            addChannel:
                args: <bot> <name> <channelName>
                params:
                    data:
                        type: json
                        desc: channel json data
                        short: d
                handler: deployment.addChannel
            removeChannel:
                desc: remove channel
                args: <bot> <name> <channelName>
                handler: deployment.removeChannel
            drop:
                desc: remove deployment
                args: <bot> <name>
                handler: deployment.drop
    set:
        type: command
        desc: Command for set property value
        args: "<prop> <value>"
        handler: utils.setProp
    
    login:
        type: command
        desc: login to kata
        args: "<type> [name]"
        params:
            user:
                type: string
                desc: username login
                short: u
            password:
                type: string
                desc: password login
                short: p
            token:
                type: string
                desc: token login
                short: t
        handler: bot.login
    # deploy:
    #     type: alias
    #     desc: alias for call deployment update
    #     alias: bot init
# entry point
main: main
